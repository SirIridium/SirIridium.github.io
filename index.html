!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <title>CSA Test Chat</title>
    <style>
      body { margin: 0; padding-bottom: 3rem; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; }

      #form { background: rgba(0, 0, 0, 0.15); padding: 0.25rem; position: fixed; bottom: 0; left: 0; right: 0; display: flex; height: 3rem; box-sizing: border-box; backdrop-filter: blur(10px); }
      #input { border: none; padding: 0 1rem; flex-grow: 1; border-radius: 2rem; margin: 0.25rem; }
      #input:focus { outline: none; }
      #form > button { background: #333; border: none; padding: 0 1rem; margin: 0.25rem; border-radius: 3px; outline: none; color: #fff; }

      #messages { list-style-type: none; margin: 0; padding: 0; }
      #messages > li { padding: 0.5rem 1rem; }
      #messages > li:nth-child(odd) { background: #efefef; }
    </style>
  </head>
  <body>
    <ul id="messages"></ul>
    <form id="form" action="">
      <input id="input" autocomplete="off" /><button>Send</button>
    </form>
    <script src="/socket.io/socket.io.js"></script>
    <script>
      let counter = 0;
  
      const socket = io({
        ackTimeout: 10000,
        retries: 3,
        auth: {
          serverOffset: 0
        }
      });
  
      const form = document.getElementById('form');
      const input = document.getElementById('input');
      const messages = document.getElementById('messages');
  
      form.addEventListener('submit', (e) => {
        e.preventDefault();
        if (input.value) {
          const clientOffset = `${socket.id}-${counter++}`;
          socket.emit('chat message', input.value, clientOffset);
          input.value = '';
        }
      });
  
      socket.on('chat message', (msg, serverOffset) => {
        const item = document.createElement('li');
        item.textContent = msg;
        messages.appendChild(item);
        window.scrollTo(0, document.body.scrollHeight);
        socket.auth.serverOffset = serverOffset;
      });
    </script>
  </body>
</html>
<!--   
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>My Webpage with Snake Game</title>
  <style>
    #gameCanvas {
      border: 1px solid black;
    }
  </style>
</head>
<body>
  <h1>Welcome to My Webpage!</h1>
  <p>Here's a simple snake game:</p>
  <canvas id="gameCanvas" width="400" height="400"></canvas>

  <script>
    // Snake class
class Snake {
  constructor() {
    this.body = [{ x: 10, y: 10 }];
    this.direction = "right";
  }

  move() {
    const head = { ...this.body[0] };
    switch (this.direction) {
      case "up":
        head.y -= 1;
        break;
      case "down":
        head.y += 1;
        break;
      case "left":
        head.x -= 1;
        break;
      case "right":
        head.x += 1;
        break;
    }
    this.body.unshift(head);
  }

  grow() {
    // Increase the length of the snake
    // Add a new segment to the end of the snake's body
    const tail = { ...this.body[this.body.length - 1] };
    this.body.push(tail);
  }

  draw() {
    // Draw the snake on the canvas
    ctx.fillStyle = "green";
    this.body.forEach((segment) => {
      ctx.fillRect(segment.x * 10, segment.y * 10, 10, 10);
    });
  }

  checkCollision() {
    // Check if the snake collides with walls or itself
    const head = this.body[0];
    if (
      head.x < 0 ||
      head.x >= canvas.width / 10 ||
      head.y < 0 ||
      head.y >= canvas.height / 10
    ) {
      return true; // Collision with wall
    }
    for (let i = 1; i < this.body.length; i++) {
      if (head.x === this.body[i].x && head.y === this.body[i].y) {
        return true; // Collision with itself
      }
    }
    return false;
  }
}

// Food class
class Food {
  constructor() {
    this.position = { x: 0, y: 0 };
  }

  generate() {
    // Generate new food at a random position on the canvas
    this.position.x = Math.floor(Math.random() * (canvas.width / 10));
    this.position.y = Math.floor(Math.random() * (canvas.height / 10));
  }

  draw() {
    // Draw the food on the canvas
    ctx.fillStyle = "red";
    ctx.fillRect(this.position.x * 10, this.position.y * 10, 10, 10);
  }
}

// Game loop
function gameLoop() {
  // Clear the canvas
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  // Move the snake
  snake.move();

  // Check for collision
  if (snake.checkCollision()) {
    // End the game
    alert("Game Over!");
    return;
  }

  // Check if the snake eats the food
  const head = snake.body[0];
  if (head.x === food.position.x && head.y === food.position.y) {
    snake.grow();
    food.generate();
  }

  // Render game
  snake.draw();
  food.draw();

  // Repeat
  requestAnimationFrame(gameLoop);
}

// Initialize game
const snake = new Snake();
const food = new Food();
food.generate();
gameLoop();

// Keyboard input
document.addEventListener("keydown", (event) => {
  const key = event.key;
  if (key === "ArrowUp" && snake.direction !== "down") {
    snake.direction = "up";
  } else if (key === "ArrowDown" && snake.direction !== "up") {
    snake.direction = "down";
  } else if (key === "ArrowLeft" && snake.direction !== "right") {
    snake.direction = "left";
  } else if (key === "ArrowRight" && snake.direction !== "left") {
    snake.direction = "right";
  }
});
</script>
</body>
</html>
-->
